# 数据链路层设备

2022.2.15

## 网桥（考纲已删）

1. 可以隔离冲突域，不能隔离广播域。网桥根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时,并不向所有接口转发此帧,而是先检查此帧的目的MAC地址,然后再确定将该帧转发到哪一个接口,或者是把它丢弃(即过滤)。

​	优点：增大了吞吐量，传播范围，可靠性，互联物理层不同的以太网

2. 网段:一般指一个计算机网络中使用同一物理层设备(传输介质,中继器,集线器等)能够直接通讯的那部分。

## 交换机

1. **冲突域与广播域**

   冲突域:在同一个冲突域中的每一个节点都能收到所有被发送的帧。简单的说就是同一时间内只能有一台设备发送信息的范围。

   广播域:网络中能接收任一设备发出的广播帧的所有设备的集合。简单的说如果站点发出一个广播信号，所有能接收收到这个信号的设备范围称为一个广播域。

|      设备      | 隔离冲突域 |  隔离广播域  |
| :------------: | :--------: | :----------: |
| 集线器、中继器 |     否     |      否      |
|      网桥      |     是     |      否      |
|     交换机     |     是     | 否，除了VLAN |
|     路由器     |     是     |      是      |

2. 介绍与原理

   介绍：局域网交换机,又称以太网交换机,从本质上说,以太网交换机是一个多端口的网桥,它工作在数据链路层。**交换机能经济地将网络分成小的冲突域,为每个工作站提供更高的带宽（独占媒体带宽）**。对于传统10Mbs的共享式以太网,若共有N个用户,则每个用户占有的平均带宽只有总带宽(10Mb/s)的1/N。在使用以太网交换机时,虽然在每个端口到主机的带宽还是10Mb/s,但由于一个用户在通信时是独占而不是和其他网络用户共享传输媒体的带宽,因此拥有N个端口的交换机的总容量N×10Mb/s。

   原理：它检测从以太端口来的数据帧的源和目的地的MAC(介质访问层)地址,然后与系统内部的动态查找表进行比较,若数据帧的源MAC地址不在查找表中,则将该地址加入查找表,并将数据帧发送给相应的目的端口。以太网交换机对工作站是透明的,因此管理开销低廉,简化了网络结点的增加、移动和网络变化的操作。利用**以太网交换机还可以方便地实现虚拟局域网VLAN,VLAN不仅可以隔离冲突域,而且可以隔离广播域**。

5. 以太网交换机的特点

   ①以太网交换机的每个端口都直接与单台主机相连(网桥的端口往往连接到一个网段),并且一般都工作在全双工方式。

   ②以太网交换机能同时连通多对端口,使每对相互通信的主机都能像独占通信媒体那样,无碰撞地传输数据。

   ③以太网交换机是一种即插即用设备,其内部的帧的转发表是通过自学习算法自动地逐渐建立起来的。

   ④以太网交换机由于使用专用的交换结构芯片,交换速率较高

   ⑤以太网交换机独占传输媒体的带宽。

6. **两种交换模式**

   ①**直通式交换机**,只检查帧的目的地址,这使得帧在接收后几乎能马上被传出去。这种方式**速度快**,但缺乏智能性和安全性,也**无法支持具有不同速率的端口**的交换。

   ②**存储转发式交换机**,先将接收到的帧缓存到高速缓存器中,并**检查数据是否正确**,确认无误后通过查找表转换成输出端口将该帧发送出去。如果发现帧有错,那么就将其丢弃。优点是可靠性高,并能支持不同速率口间的转换,缺点是**延迟较大**。以太网交换机一般都具有**多种速率的端口**,例如可以具有10Mb/s、100Mb/s和1Gb/s的端口的各种组合,因此大大方便了各种不同情况的用户。

7. **自学习功能**

   构建**交换表**，即插即用，交换表表项包括**[MAC地址，接口]**。每次收到一个帧，就把发送这个帧的MAC和收到这个帧的接口写进转发表。以后如果别的帧要发到这个MAC，就只从这个接口转发，否则会从除接受接口外的所有接口转发。每个表项都有一定的**有效时间**，过期自动删除。

8. 【2015统考真题】下列关于交换机的叙述中,正确的是()。

   A.以太网交换机本质上是一种多端口网桥

   B.通过交换机互连的一组工作站构成一个冲突域

   C.交换机每个端口所连网络构成一个独立的广播域

   D.以太网交换机可实现采用不同网络层协议的网络互联

   【A】，D不能将不同的网络层互联，是将不同的链路层互联

9. **【2013统考真题】**对于100Mb/s的以太网交换机,当输出端口无排队,以直通交换(cut-through switching)方式转发一个以太网帧(不包括前导码)时,引入的转发时延至少是()

   A. 0μS

   B. 0.48μs

   C. 5.12μs

   D. 121.44μs

   解析：直通交换在输入端口检测到一个数据帧时，检查帧首部，获取帧的目的地址，启动内部的动态查找表转换成相应的输出端口，在输入与输出交叉处接通,把数据帧直通到相应的端口，实现交换功能。直通交换方式只检查帧的**目的地址，共6B**，所以最短传输时延是$$\frac{6 × 8 bit }{ 100 Mb/s } = 0.48 μs$$

10. 在使用以太网交换机的局域网中,以下(B)是正确的

    A.局域网中只包含一个冲突域

    B.交换机的多个端口可以并行传输

    C.交换机可以隔离广播域

    D.交换机根据LLC目的地址转发

    【解析】交换机的每个端口都有其自己的冲突域,所以交换机永远不会因为冲突而丢失帧,A错误。交换机不能隔离广播域,C错误。**LLC是逻辑链路控制,它在MAC层上**,用于向网络提供一个接口以隐藏各种802网络之间的差异,**交换机应是按MAC地址转发**的,D错误。

11. 假设以太网A中80%的通信量在本局域网内进行,其余20%在本局域网与因特网之间进行,而局域网B正好相反。这两个局域网中,一个使用集线器,另一个使用交换机,则交换机应放置的局域网是(A)

    A. 以太网A

    B. 以太网B

    C. 任一以太网

    D. 都不合适

    因为以太网B有很多都要发出去，不如用集线器；以太网A很多都不用发出去，最好用交换机隔离冲突域。

12. 若一个网络采用一个具有24个10Mb/s端口的半双工交换机作为连接设备,则每个连接点平均获得的带宽为(①),该交换机的总容量为(②)

    |      | A         | B          | C        | D      |
    | ---- | --------- | ---------- | -------- | ------ |
    | ①    | 0.417Mb/s | 0.0417Mb/s | 4.17Mb/s | 10Mb/s |
    | ②    | 120Mb/s   | 240Mb/s    | 10Mb/s   | 24Mb/s |

    【D、A】半双工！！总的要除以二