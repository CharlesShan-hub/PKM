# 外部存储器
2022.05.13

[TOC]

## 磁盘存储器

1. 优点：大、便宜；重复读写；不易失；分破坏性读出；慢；机械复杂；环境苛刻

2. 组成：

   ```json
   '磁盘存储器' : {
   	'磁盘驱动器' : {
       '磁头组件': '磁头',
       '盘片组件': {
         '磁头数': '记录面数, 一个记录面一个磁头',
         '柱面数': '硬盘每面有多少条磁道',
         '扇区数': '每条磁道有多少个扇区'
       }
     }
     '磁盘控制器': '硬盘与主机的接口'
   }
   ```

3. 记录密度:

   1. 道密度：磁盘半径方向
   2. 位密度：磁道单位长度
   3. 面密度：道密度x位密度

4. 磁盘的容量: 格式化容量 < 非格式化容量

5. 平均存取时间: 寻道时间+旋转延迟时间+传输时间

6. 数据传输率 = 转速r x 每条磁道容量N字节

7. 磁盘地址：[驱动器号，柱面(磁道)号，盘面号，扇区号]

* 【2013统考真题】某磁盘的转速为 10000 转/分，平均寻道时问是6ms，磁盘传输速率是
  20MB/S，磁盘控制器延迟为 0.2ms，读取一个4KB的扇区所需的平均时问约为(）。

  **磁盘转速是 10000 转/分，转一圈的时间为 6ms，因此平均查询扇区的时间为 3ms，平均寻道时间为 6ms**，读取 4KB 扇区信息的时间为 4KB/(20MB/s)=0.2ms 信息延迟的时间为 0.2ms,
  总时间为 3+6+0.2+0.2=9.4ms.

* 【2015统考真题】若磁盘转速为7200 转/分，平均寻道时问为 8ms，每个磁道包含 1000个扇区，则访问一个扇区的平均存取时间大约是（）。
  A. 8.1ms
  B. 12.2ms
  C. 16.3ms
  D. 20.5ms

  7200r/min -> 120 r/s -> 0.12 r/ms -> 8.33 ms/r -> 平均：4.167ms

  8.33 / 1000 = 0.008333 ms

  0.00833+4.167+8 -> 12.2ms

* 【2019 统考真题】下列关于磁盘存储器的叙述中，错误的是(C)
  A. 磁盘的格式化容量比非格式化容量小
  B. 扇区中包含数据、地址和校验等信息
  C. 磁盘存储器的最小读写单位为 1 字节
  D. 磁盘存储器由磁盘控制器、磁盘驱动器和盘片组成

  最小单位是扇区！

## 磁盘阵列

RAID(独立冗余磁盘阵列)是指将多个独立的物理磁盘组成一个独立的逻辑盘，数据在多个物理盘上分割交叉存储、并行访问，具有更好的存储性能、可靠性和安全性。

RAID的分级如下所示。在RAID1~RAID5几种方案中，无论何时有磁盘损坏，都可随时拔出受损的磁盘再插入好的磁盘，而数据不会损坏，提升了系统的可靠性。

* RAID0:无冗余和无校验的磁盘阵列。
* RAID1:镜像磁盘阵列。
* RAID2:采用纠错的海明码的磁盘阵列。
* RAID3:位交叉奇偶校验的磁盘阵列。
* RAID4:块交叉奇偶校验的磁盘阵列。
* RAID5:无独立校验的奇偶校验磁盘阵列。

RAID0把连续多个数据块交替地存放在不同物理磁盘的扇区中，几个磁盘交叉并行读写，不仅扩大了存储容量，而且提高了磁盘数据存取速度，但RAD0没有容错能力。

为了提高可靠性，RAD1使两个磁盘同时进行读写，互为备份，若一个磁盘出现故障，可从另一磁盘中读出数据。两个磁盘当一个磁盘使用，意味着容量减少一半。

总之，RAID通过同时使用多个磁盘，提高了传输率：通过在多个磁盘上并行存取来大幅提高存储系统的数据吞吐量：通过镜像功能，提高安全可靠性：通过数据校验，提供容错能力。

【2013 统考真题】下列选项中，用于提高RAID可靠性的措施有（）。

1 磁盘镜像 2 条带化 3 奇偶校验 4 增加 Cache 机制
A.仅1，2
B.仅1，3
C.仅1，3，4
D.仅2，3，4

C

## 固态硬盘

略

### 考点总结

1. 磁盘时间相关计算

> 总时间 = 平均寻道时间 + 平均旋转延迟时间 + 传输时间
>
> 平均旋转延迟时间 = 转半圈的时间，通常通过n转/min求出转半圈的时间

